{
  "name" : "PyStackReg",
  "label" : "Auto Tilt Image Align (PyStackReg)",
  "description" : "Perform image alignment using PyStackReg.",
  "parameters" : [
    {
      "name" : "transform_source",
      "label" : "Transformation Source",
      "description" : "The source of the transformation matrices (i. e., generate them, load them from a file, etc.)",
      "type" : "enumeration",
      "default" : 0,
      "options" : [
        {"Generate" : "generate"},
        {"Load From File": "from_file"}
      ]
    },
    {
      "name" : "transform_type",
      "label" : "Transformation Type",
      "description" : "Transformation type for the registration",
      "type" : "enumeration",
      "default" : 0,
      "options" : [
        {"Translation" : "translation"},
        {"Rigid Body" : "rigid body"},
        {"Scaled Rotation" : "scaled rotation"},
        {"Affine" : "affine"},
        {"Bilinear": "bilinear"}
      ],
      "visible_if" : "transform_source == 'generate'"
    },
    {
      "name" : "transform_file",
      "label" : "Transformations File",
      "description": "Transformation file (npz format) to apply",
      "type" : "file",
      "filter": "NPZ files (*npz)",
      "visible_if" : "transform_source == 'from_file'"
    },
    {
      "name" : "padding",
      "label" : "Padding",
      "description" : "Array padding along non-tilt axes before registration",
      "type" : "int",
      "default" : 10,
      "minimum" : 0,
      "maximum" : 1000000,
      "visible_if" : "transform_source == 'generate'"
    },
    {
      "name" : "reference",
      "label" : "Reference",
      "description" : "The reference slice to use when determining the registration transformation for each slice.",
      "type" : "enumeration",
      "default" : 3,
      "options" : [
        {"Previous" : "previous"},
        {"First" : "first"},
        {"Mean" : "mean"},
        {"SliceIndex" : "slice_index"}
      ],
      "visible_if" : "transform_source == 'generate'"
    },
    {
      "name" : "ref_slice_index",
      "label" : "Slice Index",
      "description": "Slice index to use for the reference",
      "type" : "int",
      "default" : 0,
      "minimum" : 0,
      "maximum" : 1000000,
      "visible_if" : "transform_source == 'generate'",
      "enable_if" : "reference == 'slice_index'"
    },
    {
      "name" : "apply_to_all_arrays",
      "label": "Apply to All Arrays",
      "description": "Apply the registration transformation to all arrays within this data source (not just the currently selected one). The registration transformation is computed only using the currently selected array.",
      "type" : "bool",
      "default": true
    },
    {
      "name" : "transforms_save_file",
      "label" : "Save Transformations File",
      "description": "Save transformations file to apply to other datasets later. Leave this blank to not save it.",
      "type" : "save_file",
      "filter": "NPZ files (*npz)",
      "visible_if" : "transform_source == 'generate'"
    }
  ]
}
